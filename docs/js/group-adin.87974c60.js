(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-adin"],{"153b":function(e,t,n){"use strict";var s=n("4b32"),c=n.n(s);c.a},"4b32":function(e,t,n){},cd86:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"miller"},[n("div",{staticClass:"miller__col"},[n("h3",{staticClass:"miller__col__header"},[e._v("Organisasjon")]),e._l(e.orgs,(function(t){return n("div",{key:t.id,staticClass:"miller__col__item",class:{active:e.selectedOrgId===t.id},on:{click:function(n){return e.selectOrg(t.id)}}},[e._v(" "+e._s(t.name)+" ")])}))],2),n("div",{staticClass:"miller__col"},[n("h3",{staticClass:"miller__col__header"},[e._v("Produktområde")]),e._l(e.depts,(function(t){return n("div",{key:t.id,staticClass:"miller__col__item",class:{active:e.selectedDeptId===t.id},on:{click:function(n){return e.selectDept(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),e.selectedOrgId?n("div",{staticClass:"miller__col__item miller__col__add",on:{click:e.addDepartment}},[e._v("+ Legg til")]):e._e()],2),n("div",{staticClass:"miller__col"},[n("h3",{staticClass:"miller__col__header"},[e._v("Produkt")]),e._l(e.products,(function(t){return n("div",{key:t.id,staticClass:"miller__col__item",class:{active:e.selectedProductId===t.id},on:{click:function(n){return e.selectProduct(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),e.selectedDeptId?n("div",{staticClass:"miller__col__item miller__col__add",on:{click:e.addProduct}},[e._v("+ Legg til")]):e._e()],2),n("main",{staticClass:"miller__main"},["product"===e.selection.type?n("AdminProduct",{attrs:{docref:e.selection.docRef}}):e._e(),"department"===e.selection.type?n("AdminDepartment",{attrs:{docref:e.selection.docRef}}):e._e()],1)])])},c=[],i=(n("99af"),n("ee2e")),r=n("7e35"),o=n("9b9c"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.obj?n("div",[n("p",[e._v("Navn")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.obj.name,expression:"obj.name"}],attrs:{type:"text"},domProps:{value:e.obj.name},on:{input:function(t){t.target.composing||e.$set(e.obj,"name",t.target.value)}}}),e.obj.photoURL?n("img",{attrs:{src:e.obj.photoURL}}):e._e(),n("image-uploader",{attrs:{"max-width":250,"max-height":250,quality:.6,"auto-rotate":!0,"output-format":"blob",accept:"image/*","do-not-resize":"['gif', 'svg']",preview:!1},on:{input:e.setImage,onUpload:e.uploadPhoto}}),n("p",[e._v("Mission statement")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.obj.mission_statement,expression:"obj.mission_statement"}],attrs:{rows:"4"},domProps:{value:e.obj.mission_statement},on:{input:function(t){t.target.composing||e.$set(e.obj,"mission_statement",t.target.value)}}}),n("button",{on:{click:e.saveObject}},[e._v("Lagre")]),n("button",{on:{click:e.deleteObject}},[e._v("Slett")])],1):e._e()},a=[],l=(n("96cf"),n("89ba")),u={data:function(){return{obj:null,file:null}},props:{docref:{type:Object,required:!0}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.docref.get().then((function(e){return e.data()}));case 2:this.obj=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{docref:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.obj=null,e.next=3,t.get().then((function(e){return e.data()}));case 3:this.obj=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},methods:{saveObject:function(){this.docref.update(this.obj)},deleteObject:function(){this.docref.update({archived:!0})},setImage:function(e){this.hasImage=!0,this.file=e,this.uploadPhoto()},uploadPhoto:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.uploading=!0,t=i["storage"].ref("departments/".concat(this.docref.id)),e.next=4,t.put(this.file);case 4:return n=e.sent,e.next=7,n.ref.getDownloadURL();case 7:return s=e.sent,e.next=10,this.docref.update({photoURL:s});case 10:this.obj.photoURL=s,this.uploading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},p=u,m=n("2877"),h=Object(m["a"])(p,d,a,!1,null,null,null),_=h.exports,f={name:"Admin",components:{AdminProduct:o["a"],AdminDepartment:_},data:function(){return{orgs:[],products:[],depts:[],selectedOrgId:null,selectedDeptId:null,selectedProductId:null}},computed:{selection:function(){if(this.selectedProductId){var e=i["db"].collection("orgs/".concat(this.selectedOrgId,"/departments/").concat(this.selectedDeptId,"/products")).doc(this.selectedProductId);return{type:"product",docRef:e}}if(this.selectedDeptId){var t=i["db"].collection("orgs/".concat(this.selectedOrgId,"/departments")).doc(this.selectedDeptId);return{type:"department",docRef:t}}if(this.selectedOrgId){var n="";return{type:"organisation",docRef:n}}return!1}},methods:{selectOrg:function(e){this.selectedOrgId=e,this.selectedDeptId=null,this.depts=[],this.products=[],this.selectedProductId=null,r["a"].call(this,this.selectedOrgId)},selectDept:function(e){this.selectedDeptId=e,this.selectedProductId=null,r["d"].call(this,this.selectedOrgId,this.selectedDeptId)},selectProduct:function(e){this.selectedProductId=e},addProduct:function(){var e=this,t=i["db"].collection("orgs/".concat(this.selectedOrgId,"/departments/").concat(this.selectedDeptId,"/products"));t.add({name:"Nytt produkt",archived:!1}).then((function(t){e.selectedProductId=t.id}))},addDepartment:function(){var e=this,t=i["db"].collection("orgs/".concat(this.selectedOrgId,"/departments/"));t.add({name:"Nytt produktområde",archived:!1}).then((function(t){e.selectedProductId=null,e.products=[],e.selectedDeptId=t.id}))}},mounted:function(){r["c"].call(this)}},v=f,g=(n("153b"),Object(m["a"])(v,s,c,!1,null,"748efa64",null));t["default"]=g.exports}}]);
//# sourceMappingURL=group-adin.87974c60.js.map